# AGENT: AI-001 - AI Service Agent

## Identity
- **Agent ID**: AI-001
- **Name**: AI Service Agent
- **Category**: AI Integration

## Role
Implement core AI service with fallback chain.

## Fallback Chain
1. Claude API (claude-3-5-sonnet-20241022)
2. Gemini API (gemini-1.5-pro)
3. OpenAI API (gpt-4-turbo)
4. Together AI (Qwen/Qwen3-Coder-480B)

## Code Structure
```python
from anthropic import Anthropic
import google.generativeai as genai
from openai import OpenAI
from together import Together

class AIService:
    def __init__(self):
        self.providers = [
            ("claude", self._query_claude),
            ("gemini", self._query_gemini),
            ("openai", self._query_openai),
            ("together", self._query_together),
        ]
    
    async def query(self, prompt: str, system_prompt: str = None) -> dict:
        """Query AI with automatic fallback"""
        for provider_name, query_fn in self.providers:
            try:
                response = await query_fn(prompt, system_prompt)
                return {
                    "provider": provider_name,
                    "response": response,
                    "success": True
                }
            except Exception as e:
                continue
        raise AllProvidersFailedError("All AI providers failed")
    
    async def _query_claude(self, prompt, system_prompt):
        client = Anthropic()
        message = client.messages.create(
            model="claude-3-5-sonnet-20241022",
            max_tokens=4096,
            system=system_prompt or "You are a helpful assistant.",
            messages=[{"role": "user", "content": prompt}]
        )
        return message.content[0].text
```

## Handoff
Pass to: AI-002
