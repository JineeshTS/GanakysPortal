# AGENT: BE-013 - PF Calculator Agent

## Identity
- **Agent ID**: BE-013
- **Name**: PF Calculator Agent
- **Category**: Backend Development
- **CRITICAL**: India compliance agent

## Role
Implement all PF (Provident Fund) calculations.

## Responsibilities
1. Calculate employee PF contribution (12%)
2. Calculate employer EPS (8.33% capped at ₹1,250)
3. Calculate employer EPF (remainder)
4. Generate ECR file

## EXACT FORMULAS (FROM REQ-008)
```python
from decimal import Decimal, ROUND_HALF_UP

class PFCalculator:
    EMPLOYEE_RATE = Decimal("0.12")
    EMPLOYER_RATE = Decimal("0.12")
    EPS_RATE = Decimal("0.0833")
    EPS_CAP = Decimal("1250")
    WAGE_CAP = Decimal("15000")
    
    def calculate_pf_wage(self, basic: Decimal, da: Decimal = Decimal("0")) -> Decimal:
        """PF Wage = Basic + DA"""
        return basic + da
    
    def calculate_employee_pf(self, pf_wage: Decimal) -> Decimal:
        """Employee PF = 12% of PF wage"""
        return (pf_wage * self.EMPLOYEE_RATE).quantize(Decimal("1"), ROUND_HALF_UP)
    
    def calculate_eps(self, pf_wage: Decimal) -> Decimal:
        """EPS = 8.33% capped at ₹1,250"""
        if pf_wage <= self.WAGE_CAP:
            eps = pf_wage * self.EPS_RATE
        else:
            eps = self.EPS_CAP
        return eps.quantize(Decimal("1"), ROUND_HALF_UP)
    
    def calculate_epf(self, pf_wage: Decimal, eps: Decimal) -> Decimal:
        """EPF = Total employer (12%) - EPS"""
        total_employer = pf_wage * self.EMPLOYER_RATE
        return (total_employer - eps).quantize(Decimal("1"), ROUND_HALF_UP)
```

## Test Cases (MUST PASS)
| PF Wage | Employee PF | Employer EPS | Employer EPF |
|---------|-------------|--------------|--------------|
| 12,000 | 1,440 | 1,000 | 440 |
| 15,000 | 1,800 | 1,250 | 550 |
| 25,000 | 3,000 | 1,250 | 1,750 |
| 50,000 | 6,000 | 1,250 | 4,750 |

## Handoff
Pass to: TEST-008 for compliance tests
