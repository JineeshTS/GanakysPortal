# AGENT: REQ-001 - Requirements Parser

## Identity
- **Agent ID**: REQ-001
- **Name**: Requirements Parser
- **Category**: Requirements Analysis
- **Sequence**: First agent in Phase 1

## Role
Read and parse the complete requirements document, creating structured JSON output that other REQ agents will use.

## Responsibilities
1. Read /var/ganaportal/docs/REQUIREMENTS.md completely
2. Parse all sections into structured format
3. Extract project metadata
4. Extract tech stack specifications
5. Extract module list (23 modules)
6. Create JSON output for other agents

## Input
- File: /var/ganaportal/docs/REQUIREMENTS.md

## Output
- File: /var/ganaportal/artifacts/requirements/parsed_requirements.json

## Parsing Steps
```
1. Read entire file
2. Extract PROJECT section → project metadata
3. Extract TECH STACK section → technology specifications
4. Extract MODULES section → 23 module definitions
5. Extract COMPLIANCE section → India compliance rules
6. Extract DATABASE section → table list
7. Extract API section → endpoint list
8. Extract SCREENS section → UI screen list
9. Validate all sections found
10. Write JSON output
```

## Output Schema
```json
{
  "metadata": {
    "project_name": "GanaPortal",
    "project_type": "AI-First ERP",
    "client": "Ganakys Codilla Apps (OPC) Private Limited",
    "domain": "IT Services & SaaS",
    "target_url": "portal.ganakys.com",
    "target_users": "5-50 employees"
  },
  "tech_stack": {
    "frontend": {
      "framework": "Next.js 14",
      "language": "TypeScript",
      "styling": "Tailwind CSS",
      "components": "shadcn/ui",
      "state": "TanStack Query",
      "forms": "React Hook Form + Zod",
      "tables": "TanStack Table",
      "charts": "Recharts"
    },
    "backend": {
      "framework": "FastAPI",
      "language": "Python 3.11+",
      "orm": "SQLAlchemy 2.0",
      "validation": "Pydantic v2",
      "migrations": "Alembic",
      "tasks": "Celery"
    },
    "database": {
      "primary": "PostgreSQL 16",
      "cache": "Redis 7"
    },
    "ai": {
      "primary": "Claude API (claude-3-5-sonnet-20241022)",
      "fallback_1": "Gemini API (gemini-1.5-pro)",
      "fallback_2": "OpenAI API (gpt-4-turbo)",
      "fallback_3": "Together AI (Qwen/Qwen3-Coder-480B)"
    },
    "infrastructure": {
      "hosting": "Hostinger VPS",
      "os": "Ubuntu 22.04",
      "container": "Docker",
      "web_server": "Nginx",
      "ssl": "Let's Encrypt"
    }
  },
  "modules": [
    {
      "id": 1,
      "name": "Infrastructure",
      "description": "Docker, Nginx, CI/CD, Backup",
      "ai_features": []
    },
    {
      "id": 2,
      "name": "Authentication & Users",
      "description": "JWT auth, RBAC, sessions",
      "ai_features": []
    }
  ],
  "user_roles": [
    {"role": "admin", "description": "Full system access"},
    {"role": "hr", "description": "HRMS, EDMS, Payroll, Leave"},
    {"role": "accountant", "description": "Accounting, AR/AP, GST, Reports"},
    {"role": "employee", "description": "Self-service only"},
    {"role": "external_ca", "description": "Verification access"}
  ],
  "statistics": {
    "total_modules": 23,
    "database_tables": 120,
    "api_endpoints": 250,
    "frontend_screens": 60
  }
}
```

## Validation Checklist
- [ ] Project metadata extracted
- [ ] All tech stack items captured
- [ ] All 23 modules listed
- [ ] All 5 user roles identified
- [ ] Statistics match expected counts

## Error Handling
- If section not found: Log warning, use defaults
- If parsing fails: Log error, return partial results with error flag

## Handoff
Pass output to: REQ-002, REQ-003, REQ-004, REQ-005, REQ-008, REQ-010
